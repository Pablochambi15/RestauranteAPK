<div layout:decorate="~{base}">
    <div layout:fragment="content">
        <div class="container-menus">
            <h2>Gestión de Menú</h2>
            <a href="/menus/nuevo" class="btn-add">+Añadir menú</a>
            <div class="categorias-menu">
                <div class="categoria">
                    <h3>PLATILLOS</h3>
                    <div th:each="menu : ${menus}">
                        <div th:if="${menu.categoria} == 'Platillo'" class="menu-card">
                            <img th:src="${menu.urlImagen}" alt="Imagen platillo" class="menu-img"
                                 th:attr="data-nombre=${menu.nombre},data-descripcion=${menu.descripcion}"
                                 onclick="mostrarDescripcion(this)">
                            <div class="menu-info">
                                <span class="menu-nombre" th:text="${menu.nombre}"></span>
                                <span class="menu-precio" th:text="'$' + ${menu.precio}"></span>
                                <span class="menu-estado" th:text="${menu.estado}"></span>
                            </div>
                            <form th:action="@{'/menus/estado/' + ${menu.id}}" method="post">
                                <input type="hidden" name="estado" th:value="${menu.estado} == 'Disponible' ? 'No disponible' : 'Disponible'">
                                <button type="submit" class="btn-estado" th:text="${menu.estado} == 'Disponible' ? 'No disponible' : 'Disponible'"></button>
                            </form>
                            <div class="menu-actions">
                                <a th:href="@{'/menus/editar/' + ${menu.id}}" class="btn-editar">Editar</a>
                                <a th:href="@{'/menus/eliminar/' + ${menu.id}}" class="btn-eliminar" onclick="return confirm('¿Seguro que deseas eliminar este menú?')">Eliminar</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="categoria">
                    <h3>BEBIDAS</h3>
                    <div th:each="menu : ${menus}">
                        <div th:if="${menu.categoria} == 'Bebida'" class="menu-card">
                            <img th:src="${menu.urlImagen}" alt="Imagen bebida" class="menu-img"
                                 th:attr="data-nombre=${menu.nombre},data-descripcion=${menu.descripcion}"
                                 onclick="mostrarDescripcion(this)">
                            <div class="menu-info">
                                <span class="menu-nombre" th:text="${menu.nombre}"></span>
                                <span class="menu-precio" th:text="'$' + ${menu.precio}"></span>
                                <span class="menu-estado" th:text="${menu.estado}"></span>
                            </div>
                            <form th:action="@{'/menus/estado/' + ${menu.id}}" method="post">
                                <input type="hidden" name="estado" th:value="${menu.estado} == 'Disponible' ? 'No disponible' : 'Disponible'">
                                <button type="submit" class="btn-estado" th:text="${menu.estado} == 'Disponible' ? 'No disponible' : 'Disponible'"></button>
                            </form>
                            <div class="menu-actions">
                                <a th:href="@{'/menus/editar/' + ${menu.id}}" class="btn-editar">Editar</a>
                                <a th:href="@{'/menus/eliminar/' + ${menu.id}}" class="btn-eliminar" onclick="return confirm('¿Seguro que deseas eliminar este menú?')">Eliminar</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="categoria">
                    <h3>POSTRES</h3>
                    <div th:each="menu : ${menus}">
                        <div th:if="${menu.categoria} == 'Postre'" class="menu-card">
                            <img th:src="${menu.urlImagen}" alt="Imagen postre" class="menu-img"
                                 th:attr="data-nombre=${menu.nombre},data-descripcion=${menu.descripcion}"
                                 onclick="mostrarDescripcion(this)">
                            <div class="menu-info">
                                <span class="menu-nombre" th:text="${menu.nombre}"></span>
                                <span class="menu-precio" th:text="'$' + ${menu.precio}"></span>
                                <span class="menu-estado" th:text="${menu.estado}"></span>
                            </div>
                            <form th:action="@{'/menus/estado/' + ${menu.id}}" method="post">
                                <input type="hidden" name="estado" th:value="${menu.estado} == 'Disponible' ? 'No disponible' : 'Disponible'">
                                <button type="submit" class="btn-estado" th:text="${menu.estado} == 'Disponible' ? 'No disponible' : 'Disponible'"></button>
                            </form>
                            <div class="menu-actions">
                                <a th:href="@{'/menus/editar/' + ${menu.id}}" class="btn-editar">Editar</a>
                                <a th:href="@{'/menus/eliminar/' + ${menu.id}}" class="btn-eliminar" onclick="return confirm('¿Seguro que deseas eliminar este menú?')">Eliminar</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal para la descripción -->
        <div id="modalDescripcion" class="modal-descripcion" style="display:none;">
            <div class="modal-content">
                <span class="close-modal" onclick="cerrarDescripcion()">&times;</span>
                <h3 id="modalTitulo"></h3>
                <p id="modalTexto"></p>
            </div>
        </div>
        <script>
        function mostrarDescripcion(img) {
            document.getElementById('modalTitulo').innerText = img.getAttribute('data-nombre');
            document.getElementById('modalTexto').innerText = img.getAttribute('data-descripcion');
            document.getElementById('modalDescripcion').style.display = 'block';
        }
        function cerrarDescripcion() {
            document.getElementById('modalDescripcion').style.display = 'none';
        }
        </script>
        <link rel="stylesheet" href="/css/menus.css">
    </div>
</div> 